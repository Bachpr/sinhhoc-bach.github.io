<!DOCTYPE html>
<html lang="vi" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trao ƒë·ªïi n∆∞·ªõc ·ªü th·ª±c v·∫≠t ‚Äì 3 giai ƒëo·∫°n</title>
  <meta name="description" content="B√†i h·ªçc t∆∞∆°ng t√°c: L√¥ng h√∫t h·∫•p th·ª• (th·∫©m th·∫•u, thu ƒë·ªông/ch·ªß ƒë·ªông) ‚Üí V·∫≠n chuy·ªÉn v√†o m·∫°ch g·ªó (apoplast & symplast) ‚Üí D√≤ng l√™n + tho√°t h∆°i & kh√≠ kh·ªïng. G·ªìm c√¢u h·ªèi ƒê√∫ng/Sai, ƒêi·ªÅn, K√©o‚Äëth·∫£, Tr·∫£ l·ªùi ng·∫Øn; dark/light; ·∫£nh & video."/>
  <style>
    :root{--bg:#f8fafc;--panel:#ffffff;--text:#0f172a;--muted:#475569;--primary:#2563eb;--primary-contrast:#ffffff;--border:#e2e8f0;--accent:#10b981;--success:#16a34a;--danger:#dc2626;--shadow:0 10px 25px rgba(2,6,23,.08)}
    [data-theme="dark"]{--bg:#0b1220;--panel:#0f172a;--text:#e5e7eb;--muted:#94a3b8;--primary:#60a5fa;--primary-contrast:#0b1220;--border:#1f2a44;--accent:#34d399;--success:#22c55e;--danger:#f87171;--shadow:0 10px 25px rgba(0,0,0,.35)}
    *,*::before,*::after{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
    img{max-width:100%;display:block;border-radius:14px}
    h1,h2,h3{line-height:1.25;margin:0 0 .5rem}
    p{margin:.5rem 0 1rem}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;z-index:10;background:rgba(255,255,255,.6);backdrop-filter:saturate(160%) blur(8px);border-bottom:1px solid var(--border)}
    [data-theme="dark"] header{background:rgba(15,23,42,.6)}
    .toolbar{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:12px 24px}
    nav.toc{position:sticky;top:60px;z-index:5;background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:10px;margin-top:10px;box-shadow:var(--shadow);display:flex;flex-wrap:wrap;gap:8px;align-items:center;overflow:auto}
    nav.toc strong{margin-right:6px}
    nav.toc a{display:inline-flex;align-items:center;gap:6px;color:var(--text);padding:.5rem .75rem;text-decoration:none;border-radius:12px;border:1px solid var(--border);background:var(--panel)}
    nav.toc a:hover{background:linear-gradient(180deg,rgba(148,163,184,.12),transparent);color:var(--primary)}
    nav.toc a.active{border-color:var(--primary);color:var(--primary);font-weight:700;box-shadow:0 0 0 3px rgba(37,99,235,.15)}
    html{scroll-behavior:smooth}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
    .card{grid-column:span 12;background:var(--panel);border:1px solid var(--border);border-radius:18px;padding:18px;box-shadow:var(--shadow)}
    @media(min-width:820px){.card.split{display:grid;grid-template-columns:1.1fr .9fr;align-items:center}.aside{grid-column:span 4}.main{grid-column:span 8}.card.half{grid-column:span 6}}
    .btn{border:1px solid var(--border);background:var(--panel);color:var(--text);padding:.6rem 1rem;border-radius:12px;cursor:pointer;font-weight:600}
    .btn.primary{background:var(--primary);color:var(--primary-contrast);border-color:transparent}
    .status{font-size:.9rem;color:var(--muted)}
    .section-spacing{margin-top:40px;margin-bottom:40px}
    .q-item{border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:12px}
    .q-item.correct{border-color:var(--success)}
    .q-item.wrong{border-color:var(--danger)}
    .explain{font-size:.92rem;color:var(--muted);margin-top:.4rem}
    .score{font-weight:700}
    .q-item.truefalse{background:linear-gradient(180deg,rgba(147,197,253,.12),transparent)}
    .q-item.fill{background:linear-gradient(180deg,rgba(167,243,208,.12),transparent)}
    .q-item.short{background:linear-gradient(180deg,rgba(253,230,138,.12),transparent)}
    .q-item.dragdrop{background:linear-gradient(180deg,rgba(196,181,253,.12),transparent)}
    .input,textarea.input{display:block;width:100%;padding:.6rem .8rem;border:1px solid var(--border);border-radius:12px;background:var(--panel);color:var(--text);font-size:1rem;margin-top:.4rem;transition:border-color .2s ease,box-shadow .2s ease}
    .input:focus,textarea.input:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.15);outline:none}
    textarea.input{min-height:60px;resize:vertical}
    .dd-bank{display:flex;flex-wrap:wrap;gap:8px;padding:8px;border:1px dashed var(--border);border-radius:14px;background:rgba(148,163,184,.08)}
    .dd-token{padding:.4rem .7rem;border:1px solid var(--border);border-radius:999px;background:var(--panel);box-shadow:0 1px 3px rgba(0,0,0,.08);cursor:grab;transition:transform .15s ease}
    .dd-token:active{transform:scale(.95)}
    .dd-row{display:grid;grid-template-columns:1fr 180px;gap:10px;align-items:center;margin:.5rem 0}
    .dd-drop{min-height:40px;border:1px dashed var(--border);border-radius:14px;padding:.4rem .6rem;background:rgba(255,255,255,.4);transition:background .2s ease,border-color .2s ease}
    .dd-drop:empty::before{content:'K√©o th·∫£ v√†o ƒë√¢y';font-size:.85rem;color:var(--muted)}
    .dd-drop:hover{border-color:var(--primary);background:rgba(148,163,184,.15)}
    html,body,.card,.btn,nav.toc,.q-item,.input,textarea.input,.dd-drop,.dd-token{transition:background-color .4s ease,color .4s ease,border-color .4s ease,box-shadow .4s ease}
    #giai-doan-1 h2{color:#2563eb}
    #giai-doan-2 h2{color:#d946ef}
    #giai-doan-3 h2{color:#f59e0b}
    #vai-tro h2{color:#8b5cf6}
    #questionPalette{margin:10px 0;display:flex;flex-wrap:wrap;gap:6px}
    .q-pal-btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:8px;border:1px solid var(--border);background:var(--panel);color:var(--text);cursor:pointer;transition:background .2s ease,border-color .2s ease}
    .q-pal-btn:hover{border-color:var(--primary)}
    .q-pal-btn.done{background:var(--accent);color:#fff}
    .filter-bar{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px;background:linear-gradient(180deg,rgba(148,163,184,.12),transparent);border:1px solid var(--border);border-radius:14px;padding:10px}
    .filter-bar .group{display:flex;align-items:center;gap:8px;font-weight:600}
    .select{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding:.55rem .9rem;border:1px solid var(--border);border-radius:10px;background:var(--panel);color:var(--text);cursor:pointer;min-width:160px;line-height:1.2;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%2364738b' viewBox='0 0 16 16'%3E%3Cpath d='M3.2 6l4.8 5L12.8 6H3.2z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center;background-size:16px}
    .select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.15)}
    .q-header{display:flex;align-items:center;gap:10px;font-weight:700;margin-bottom:.35rem}
    .q-icon{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:999px;background:rgba(148,163,184,.18);border:1px solid var(--border);font-size:14px}
    .choices{display:flex;gap:10px;flex-wrap:wrap;margin-top:.4rem}
    .choice{display:flex;align-items:center;gap:8px;border:1px solid var(--border);border-radius:12px;padding:.45rem .7rem;cursor:pointer;background:var(--panel)}
    .choice input{display:none}
    .choice input:checked+span{border-color:var(--primary);background:linear-gradient(180deg,rgba(37,99,235,.15),transparent);color:var(--primary);padding:.1rem .2rem;border-radius:8px}
    .footer{margin:28px 0 40px;color:var(--muted);text-align:center}
    .theme-overlay{position:fixed;inset:0;pointer-events:none;background:radial-gradient(1200px 1200px at var(--x,50%) var(--y,50%),rgba(99,102,241,.25),transparent 60%);animation:themeFade .6s ease-out;z-index:999}
    @keyframes themeFade{from{opacity:1}to{opacity:0}}
  </style>
</head>
<body>
  <header>
    <div class="toolbar container">
      <div>
        <h1>Trao ƒë·ªïi n∆∞·ªõc ·ªü th·ª±c v·∫≠t</h1>
        <div class="status">B√†i t·∫≠p th·ª±c h√†nh</div>
      </div>
      <button class="btn" id="themeBtn" aria-label="Chuy·ªÉn ch·ªß ƒë·ªÅ">üåô/‚òÄÔ∏è</button>
    </div>
  </header>
  <main class="container">
    <section class="grid section-spacing" id="bai-lam">
      <article class="card">
        <h1 style="text-align:center;font-size:2rem;margin:10px 0;">B√†i l√†m v·ªÅ trao ƒë·ªïi n∆∞·ªõc ·ªü th·ª±c v·∫≠t</h1>
      </article>
    </section>
    <button class="btn" id="toggleToc" style="margin-bottom:10px">Hi·ªán/·∫®n m·ª•c l·ª•c</button>
    <nav class="toc" id="tocNav">
      <strong>ƒêi t·ªõi m·ª•c:</strong>
      <a href="#vai-tro">C√¢u h·ªèi: Vai tr√≤ c·ªßa n∆∞·ªõc v·ªõi th·ª±c v·∫≠t?</a>
      <a href="#giai-doan-1">‚ë† H·∫•p th·ª• n∆∞·ªõc (·ªü r·ªÖ)</a>
      <a href="#giai-doan-2">‚ë° V·∫≠n chuy·ªÉn n∆∞·ªõc t·ª´ r·ªÖ l√™n l√°</a>
      <a href="#giai-doan-3">‚ë¢ Tho√°t h∆°i n∆∞·ªõc (·ªü l√°)</a>
      <a href="#quizSection">C√¢u h·ªèi ki·ªÉm tra</a>
    </nav>
    <section class="grid section-spacing" id="vai-tro">
      <article class="card half">
        <details>
          <summary><h2>C√¢u h·ªèi: Vai tr√≤ c·ªßa n∆∞·ªõc v·ªõi th·ª±c v·∫≠t?</h2></summary>
        <p>Trong c√¢y, n∆∞·ªõc t·ªìn t·∫°i ·ªü 2 d·∫°ng: <strong>n∆∞·ªõc t·ª± do</strong> v√† <strong>n∆∞·ªõc li√™n k·∫øt</strong>. N∆∞·ªõc t·ª± do c√≥ √Ω nghƒ©a ƒë·ªëi v·ªõi qu√° tr√¨nh trao ƒë·ªïi ch·∫•t c·ªßa c√¢y, c√≤n n∆∞·ªõc li√™n k·∫øt b·∫£o v·ªá cho keo nguy√™n sinh ch·∫•t kh·ªèi b·ªã ƒë√¥ng t·ª• v√† ngƒÉn c·∫£n s·ª± ph√° hu·ª∑ c·∫•u tr√∫c c·ªßa c√°c b√†o quan. Th·ª±c v·∫≠t c√≥ kh·∫£ nƒÉng ch·ªëng ch·ªãu v·ªõi ƒëi·ªÅu ki·ªán b·∫•t l·ª£i c·ªßa m√¥i tr∆∞·ªùng t·ªët c√≥ h√†m l∆∞·ª£ng n∆∞·ªõc li√™n k·∫øt cao h∆°n th·ª±c v·∫≠t kh√¥ng ch·ªëng ch·ªãu. ==>N∆∞·ªõc ƒë√≥ng vai tr√≤ quan tr·ªçng v√† thi·∫øt y·∫øu ƒë·ªëi v·ªõi th·ª±c v·∫≠t.</p>
        <ul>
          <li><strong>Nguy√™n li·ªáu</strong> cho quang h·ª£p v√† tham gia ph·∫£n ·ª©ng sinh h√≥a.</li>
          <li><strong>M√¥i tr∆∞·ªùng ho√† tan</strong> v√† <strong>v·∫≠n chuy·ªÉn</strong> kho√°ng qua xylem.</li>
          <li><strong>Duy tr√¨ s·ª©c tr∆∞∆°ng</strong>, h√¨nh th√°i t·∫ø b√†o & sinh tr∆∞·ªüng.</li>
          <li><strong>ƒêi·ªÅu ho√† nhi·ªát</strong> nh·ªù tho√°t h∆°i n∆∞·ªõc.</li>
        </ul>
      </details>
      </article>
      <article class="card half">
        <img alt="Vai tr√≤ c·ªßa n∆∞·ªõc" src="https://gpbanmethuot.net/uploads/news/2021_05/tbd-080521a21.jpg"/>
      </article>
    </section>
    <section class="grid section-spacing" id="giai-doan-1">
      <article class="card half">
        <h2>‚ë† H·∫•p th·ª• n∆∞·ªõc (·ªü r·ªÖ)</h2>
        <ul>
          <li><strong>Th·ª±c v·∫≠t th·ªßy sinh:</strong> h√∫t n∆∞·ªõc qua to√†n b·ªô b·ªÅ m·∫∑t c∆° th·ªÉ.</li>
          <li><strong>Th·ª±c v·∫≠t tr√™n c·∫°n:</strong> ch·ªß y·∫øu h√∫t n∆∞·ªõc qua l√¥ng h√∫t c·ªßa r·ªÖ.</li>
          <li><strong>ƒê·ªông l·ª±c:</strong> ch√™nh l·ªách th·∫ø n∆∞·ªõc (n∆∞·ªõc di chuy·ªÉn t·ª´ n∆°i c√≥ th·∫ø n∆∞·ªõc cao ‚Üí n∆°i c√≥ th·∫ø n∆∞·ªõc th·∫•p).</li>
          <li><strong>C∆° ch·∫ø ch·ªß ƒë·ªông:</strong> r·ªÖ h√¥ h·∫•p m·∫°nh t·∫°o ATP, d√πng ATP ƒë·ªÉ v·∫≠n chuy·ªÉn ion v√†o kh√¥ng b√†o ‚Üí tƒÉng √°p su·∫•t th·∫©m th·∫•u ‚Üí h√∫t n∆∞·ªõc.</li>
        </ul>
        <p><strong>ƒê·∫∑c ƒëi·ªÉm th√≠ch nghi c·ªßa t·∫ø b√†o l√¥ng h√∫t:</strong></p>
        <ul>
          <li>Kh√¥ng b√†o trung t√¢m l·ªõn.</li>
          <li>Th√†nh m·ªèng, kh√¥ng th·∫•m cutin.</li>
          <li>H√¥ h·∫•p m·∫°nh, t·∫°o √°p su·∫•t th·∫©m th·∫•u cao.</li>
        </ul>
        <p><strong>√ù nghƒ©a:</strong></p>
        <ul>
          <li>Cung c·∫•p nguy√™n li·ªáu n∆∞·ªõc cho c√°c qu√° tr√¨nh s·ªëng (quang h·ª£p, h√¥ h·∫•p, v·∫≠n chuy·ªÉn ch·∫•t).</li>
          <li>L√†m dung m√¥i h√≤a tan v√† v·∫≠n chuy·ªÉn mu·ªëi kho√°ng t·ª´ ƒë·∫•t v√†o c√¢y.</li>
          <li>Gi√∫p duy tr√¨ √°p su·∫•t th·∫©m th·∫•u, ƒë·ªô tr∆∞∆°ng n∆∞·ªõc ‚Üí gi·ªØ cho t·∫ø b√†o kh√¥ng b·ªã h√©o.</li>
        </ul>
        <p><strong>Th·∫©m th·∫•u:</strong> N∆∞·ªõc ƒëi <em>t·ª´ ƒë·∫•t ‚Üí v√†o</em> t·∫ø b√†o l√¥ng h√∫t theo ch√™nh l·ªách th·∫ø n∆∞·ªõc.</p>
        <p><strong>Kho√°ng:</strong></p>
        <ul>
          <li><strong>Thu ƒë·ªông</strong> (theo gradien n·ªìng ƒë·ªô, kh√¥ng d√πng ATP).</li>
          <li><strong>Ch·ªß ƒë·ªông</strong> (ng∆∞·ª£c gradien, nh·ªù b∆°m m√†ng d√πng <abbr title="Adenosine triphosphate">ATP</abbr>).</li>
        </ul>
        <p class="status">L√¥ng h√∫t <em>th√≠ch nghi</em>: th√†nh m·ªèng, nhi·ªÅu, tu·ªïi th·ªç ng·∫Øn, tƒÉng di·ªán t√≠ch ti·∫øp x√∫c ƒë·∫•t.</p>
      </article>
      <article class="card half">
        <img alt="L√¥ng h√∫t r·ªÖ" src="https://video.vietjack.com/upload2/quiz_source1/2022/01/screenshot-1641367523-1641367406.png"/>
      </article>
    </section>
    <section class="grid section-spacing" id="giai-doan-2">
      <article class="card split">
        <div class="main">
          <h2>‚ë° V·∫≠n chuy·ªÉn n∆∞·ªõc t·ª´ r·ªÖ l√™n l√°</h2>
          <ul>
            <li><strong>N∆∞·ªõc t·ª´ l√¥ng h√∫t ‚Üí m·∫°ch g·ªó qua 2 con ƒë∆∞·ªùng:</strong>
              <ul>
                <li><strong>Gian b√†o (apoplast):</strong> ƒëi theo v√°ch t·∫ø b√†o.</li>
                <li><strong>T·∫ø b√†o ch·∫•t (symplast):</strong> ƒëi qua ch·∫•t nguy√™n sinh qua c·∫ßu n·ªëi plasmodesmata.</li>
              </ul>
              ‚Üí ƒê·∫øn n·ªôi b√¨ th√¨ bu·ªôc ph·∫£i ƒëi theo con ƒë∆∞·ªùng t·∫ø b√†o ch·∫•t ƒë·ªÉ v√†o m·∫°ch g·ªó.
            </li>
          </ul>
          <ul>
            <li><strong>N∆∞·ªõc di chuy·ªÉn trong m·∫°ch g·ªó nh·ªù 3 l·ª±c:</strong>
              <ul>
                <li>L·ª±c ƒë·∫©y c·ªßa √°p su·∫•t r·ªÖ.</li>
                <li>L·ª±c li√™n k·∫øt ‚Äì b√°m d√≠nh (gi·ªØa c√°c ph√¢n t·ª≠ n∆∞·ªõc v√† th√†nh m·∫°ch).</li>
                <li>L·ª±c h√∫t do tho√°t h∆°i n∆∞·ªõc ·ªü l√° (quan tr·ªçng nh·∫•t).</li>
              </ul>
            </li>
          </ul>
          <p><strong>√ù nghƒ©a:</strong></p>
          <ul>
            <li>ƒê∆∞a n∆∞·ªõc v√† mu·ªëi kho√°ng t·ª´ r·ªÖ ‚Üí l√°, n∆°i di·ªÖn ra quang h·ª£p.</li>
            <li>Duy tr√¨ d√≤ng v·∫≠n chuy·ªÉn li√™n t·ª•c trong c∆° th·ªÉ c√¢y.</li>
            <li>T·∫°o s·ª©c cƒÉng ‚Äì ƒë·ªô c·ª©ng cho c√¢y (gi√∫p c√¢y ƒë·ª©ng v·ªØng).</li>
          </ul>
        </div>
        <div class="aside">
          <iframe title="Video minh h·ªça" width="100%" height="260" style="border:0;border-radius:14px" src="https://www.youtube.com/embed/JFPOxRfsBWQ" loading="lazy" allowfullscreen></iframe>
          <div class="status">Video YouTube theo li√™n k·∫øt b·∫°n cung c·∫•p.</div>
        </div>
      </article>
    </section>
    <section class="grid section-spacing" id="giai-doan-3">
      <article class="card half">
        <h2>‚ë¢ Tho√°t h∆°i n∆∞·ªõc (·ªü l√°)</h2>
        <p><strong>Ba l·ª±c duy tr√¨ d√≤ng n∆∞·ªõc:</strong></p>
        <ol>
          <li><strong>√Åp su·∫•t r·ªÖ</strong> (ƒë·∫©y).</li>
          <li><strong>Li√™n k·∫øt ‚Äì b√°m d√≠nh</strong> (cohesion ‚Äì adhesion) trong c·ªôt n∆∞·ªõc xylem.</li>
          <li><strong>L·ª±c h√∫t tho√°t h∆°i</strong> ·ªü l√° (k√©o).</li>
        </ol>
        <details>
          <summary>Tho√°t h∆°i & kh√≠ kh·ªïng (t√≥m t·∫Øt)</summary>
          <p>N∆∞·ªõc khu·∫øch t√°n t·ª´ <em>t·∫ø b√†o nhu m√¥ l√° ‚Üí kho·∫£ng gian b√†o ‚Üí qua kh√≠ kh·ªïng ‚Üí ra kh√≠ quy·ªÉn</em>. C∆° ch·∫ø ƒë√≥ng/m·ªü kh√≠ kh·ªïng li√™n quan ƒë·∫øn √°p su·∫•t tr∆∞∆°ng c·ªßa t·∫ø b√†o kh√≠ kh·ªïng (ion K‚Å∫, ABA, √°nh s√°ng,...).</p>
        </details>
      </article>
      <article class="card half">
        <img alt="tho√°t n∆∞·ªõc tr√™n l√°" src="https://vietjack.com/khoa-hoc-tu-nhien-7-ct/images/cau-hoi-thao-luan-5-trang-132-khtn-7-chan-troi.PNG"/>
      </article>
    </section>
    <section class="grid section-spacing">
      <article class="card">
        <button class="btn primary" id="toggleQuiz">Hi·ªán/·∫®n c√¢u h·ªèi</button>
        <div id="quizSection" style="display:none;margin-top:12px">
          <h2 id="quizSectionHeading">C√¢u h·ªèi ki·ªÉm tra ki·∫øn th·ª©c</h2>
          <div class="status">Ch·ªçn m·ª©c ƒë·ªô & ki·ªÉu c√¢u h·ªèi ph√π h·ª£p n·ªôi dung.</div>
          <div class="filter-bar">
            <label class="group">M·ª©c ƒë·ªô
              <select id="levelFilter" class="select">
                <option value="all">T·∫•t c·∫£</option>
                <option value="easy">D·ªÖ</option>
                <option value="medium">Trung b√¨nh</option>
                <option value="hard">Kh√≥</option>
              </select>
            </label>
            <label class="group">Ki·ªÉu c√¢u h·ªèi
              <select id="typeFilter" class="select">
                <option value="all">T·∫•t c·∫£</option>
                <option value="truefalse">ƒê√∫ng/Sai</option>
                <option value="fill">ƒêi·ªÅn</option>
                <option value="short">Tr·∫£ l·ªùi ng·∫Øn</option>
                <option value="dragdrop">K√©o-th·∫£</option>
              </select>
            </label>
          </div>
          <div id="questionPalette" aria-label="Danh s√°ch c√¢u h·ªèi"></div>
          <div id="quiz" style="margin-top:10px"></div>
          <div style="display:flex;gap:10px;margin-top:10px">
            <button class="btn" id="submitQuiz" aria-label="N·ªôp b√†i">N·ªôp b√†i</button>
            <button class="btn" id="resetQuiz" aria-label="L√†m l·∫°i">L√†m l·∫°i</button>
            <div style="margin-left:auto" class="score" id="scoreBox" aria-live="polite">ƒêi·ªÉm: 0/0</div>
          </div>
        </div>
      </article>
    </section>
    <p class="footer">¬© 2025 b√†i th·ª±c h√†nh</p>
  </main>
  <script>
    const savedTheme=localStorage.getItem('theme');
    const themeBtn=document.getElementById('themeBtn');
    if(savedTheme){document.documentElement.setAttribute('data-theme',savedTheme);themeBtn.textContent=savedTheme==='dark'?'‚òÄÔ∏è':'üåô'}else{themeBtn.textContent='üåô'}
    themeBtn.addEventListener('click',e=>{
      const current=document.documentElement.getAttribute('data-theme');
      const next=current==='dark'?'light':'dark';
      const overlay=document.createElement('div');
      overlay.className='theme-overlay';
      const x=(e && e.clientX ? e.clientX : window.innerWidth/2)+'px';
      const y=(e && e.clientY ? e.clientY : window.innerHeight/2)+'px';
      overlay.style.setProperty('--x',x);
      overlay.style.setProperty('--y',y);
      const removeOverlay=()=>overlay.remove();
      overlay.addEventListener('animationend',removeOverlay,{once:true});
      if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){
        overlay.style.animationDuration='0s';
      }
      document.body.appendChild(overlay);
      document.documentElement.setAttribute('data-theme',next);
      localStorage.setItem('theme',next);
      themeBtn.textContent=next==='dark'?'‚òÄÔ∏è':'üåô'
    });
    const toggleTocBtn=document.getElementById('toggleToc');
    const tocNav=document.getElementById('tocNav');
    tocNav.style.transition='transform .3s ease, opacity .3s ease';
    const hideClass='hidden';
    const styleHidden=document.createElement('style');
    styleHidden.textContent=`#tocNav.hidden{transform:translateX(-110%);opacity:0;pointer-events:none}`;
    document.head.appendChild(styleHidden);
    toggleTocBtn.addEventListener('click',()=>tocNav.classList.toggle(hideClass));
    const tocLinks=Array.from(document.querySelectorAll('nav.toc a'));
    tocLinks.forEach(a=>{a.addEventListener('click',e=>{const sel=document.querySelector(a.getAttribute('href'));if(sel){e.preventDefault();sel.scrollIntoView({behavior:'smooth',block:'start'});history.replaceState(null,'',a.getAttribute('href'));}})});
    const targets=tocLinks.map(a=>document.querySelector(a.getAttribute('href'))).filter(Boolean);
    const io=new IntersectionObserver(entries=>{entries.forEach(entry=>{const id='#'+entry.target.id;const link=tocLinks.find(a=>a.getAttribute('href')===id);if(!link)return;if(entry.isIntersecting){tocLinks.forEach(l=>l.classList.remove('active'));link.classList.add('active');}})},{root:null,rootMargin:'-45% 0px -50% 0px',threshold:0});
    targets.forEach(t=>io.observe(t));

    const QUESTIONS=[
      {type:'truefalse',level:'easy',q:'(ƒê√∫ng/Sai) N∆∞·ªõc v√†o t·∫ø b√†o l√¥ng h√∫t ch·ªß y·∫øu nh·ªù th·∫©m th·∫•u t·ª´ ƒë·∫•t v√†o t·∫ø b√†o.',answer:true,explain:'ƒê√∫ng. N∆∞·ªõc ƒëi theo ch√™nh l·ªách th·∫ø n∆∞·ªõc qua m√†ng sinh ch·∫•t.'},
      {type:'fill',level:'easy',q:'ƒêi·ªÅn: H·∫•p th·ª• kho√°ng \u003Cthu ____\u003E di·ªÖn ra theo gradien n·ªìng ƒë·ªô.',answers:[["dong","ƒë·ªông","thu ƒë·ªông"]],explain:'Thu ƒë·ªông = theo gradien n·ªìng ƒë·ªô, kh√¥ng ti√™u t·ªën nƒÉng l∆∞·ª£ng.'},
      {type:'short',level:'easy',q:'K·ªÉ t√™n m·ªôt trong hai con ƒë∆∞·ªùng t·ª´ v·ªè r·ªÖ v√†o m·∫°ch g·ªó.',acceptable:['apoplast','gian b√†o','symplast','t·∫ø b√†o ch·∫•t'],explain:'Hai con ƒë∆∞·ªùng: apoplast (gian b√†o) v√† symplast (t·∫ø b√†o ch·∫•t).'},
      {type:'truefalse',level:'medium',q:'(ƒê√∫ng/Sai) V·∫≠n chuy·ªÉn kho√°ng ch·ªß ƒë·ªông ƒëi c√πng chi·ªÅu gradien n·ªìng ƒë·ªô v√† kh√¥ng c·∫ßn ATP.',answer:false,explain:'Sai. Ch·ªß ƒë·ªông ƒëi NG∆Ø·ª¢C gradien v√† c·∫ßn ATP.'},
      {type:'fill',level:'medium',q:'ƒêi·ªÅn 2 tr·ªëng: ______ (ƒëi gi·ªØa th√†nh t·∫ø b√†o) v√† ______ (ƒëi trong t·∫ø b√†o ch·∫•t).',answers:[["apoplast","gian b√†o"],["symplast","t·∫ø b√†o ch·∫•t"]],explain:'Apoplast ‚Üî gian b√†o; Symplast ‚Üî t·∫ø b√†o ch·∫•t.'},
      {type:'short',level:'medium',q:'N√™u m·ªôt ƒë·∫∑c ƒëi·ªÉm th√≠ch nghi gi√∫p l√¥ng h√∫t h·∫•p th·ª• hi·ªáu qu·∫£.',acceptable:['th√†nh m·ªèng','nhi·ªÅu l√¥ng h√∫t','di·ªán t√≠ch l·ªõn','tu·ªïi th·ªç ng·∫Øn','ti·∫øp x√∫c ƒë·∫•t l·ªõn','kh√¥ng cutin'],explain:'V√≠ d·ª•: th√†nh m·ªèng, s·ªë l∆∞·ª£ng nhi·ªÅu, tƒÉng di·ªán t√≠ch ti·∫øp x√∫c, ‚Ä¶'},
      {type:'dragdrop',level:'medium',q:'Gh√©p thu·∫≠t ng·ªØ ‚Äì m√¥ t·∫£.',pairs:[{prompt:'Thu ƒë·ªông',targetId:'t1'},{prompt:'Ch·ªß ƒë·ªông',targetId:'t2'},{prompt:'Th·∫©m th·∫•u',targetId:'t3'}],tokens:[{id:'t1',label:'Theo gradien n·ªìng ƒë·ªô (kh√¥ng d√πng ATP)'},{id:'t2',label:'Ng∆∞·ª£c gradien (c·∫ßn ATP)'},{id:'t3',label:'N∆∞·ªõc theo th·∫ø n∆∞·ªõc t·ª´ cao ‚Üí th·∫•p'}],explain:'Thu ƒë·ªông‚Üîgradien; Ch·ªß ƒë·ªông‚ÜîATP; Th·∫©m th·∫•u‚Üîth·∫ø n∆∞·ªõc.'},
      {type:'truefalse',level:'hard',q:'(ƒê√∫ng/Sai) ·ªû n·ªôi b√¨, n∆∞·ªõc c√≥ th·ªÉ ƒëi apoplast v√†o m·∫°ch g·ªó m√† kh√¥ng qua m√†ng.',answer:false,explain:'Sai. ƒêai Caspari ch·∫∑n apoplast, bu·ªôc chuy·ªÉn sang symplast tr∆∞·ªõc khi v√†o xylem.'},
      {type:'fill',level:'hard',q:'ƒêi·ªÅn 2 tr·ªëng: V·∫≠n chuy·ªÉn ch·ªß ƒë·ªông d√πng ______ m√†ng v√† ti√™u t·ªën ______.',answers:[["b∆°m","protein v·∫≠n chuy·ªÉn","ch·∫•t v·∫≠n chuy·ªÉn"],["atp"]],explain:'C√°c b∆°m m√†ng s·ª≠ d·ª•ng ATP ƒë·∫©y ion ng∆∞·ª£c gradien.'},
      {type:'short',level:'hard',q:'Li·ªát k√™ m·ªôt trong ba l·ª±c duy tr√¨ d√≤ng n∆∞·ªõc ƒëi l√™n th√¢n.',acceptable:['√°p su·∫•t r·ªÖ','l·ª±c h√∫t tho√°t h∆°i','tho√°t h∆°i','cohesion','adhesion','li√™n k·∫øt','b√°m d√≠nh'],explain:'Ba l·ª±c: √°p su·∫•t r·ªÖ; li√™n k·∫øt‚Äìb√°m d√≠nh; l·ª±c h√∫t do tho√°t h∆°i.'},
      {type:'dragdrop',level:'hard',q:'K√©o th·∫£: gh√©p ƒë·ªëi t∆∞·ª£ng ‚Äì vai tr√≤/ƒë·∫∑c ƒëi·ªÉm.',pairs:[{prompt:'Apoplast',targetId:'d1'},{prompt:'Symplast',targetId:'d2'},{prompt:'ƒêai Caspari',targetId:'d3'},{prompt:'Kh√≠ kh·ªïng',targetId:'d4'}],tokens:[{id:'d1',label:'Khoang gian b√†o & th√†nh t·∫ø b√†o'},{id:'d2',label:'Li√™n t·ª•c t·∫ø b√†o ch·∫•t qua plasmodesmata'},{id:'d3',label:'D·∫£i suberin n·ªôi b√¨ ch·∫∑n apoplast'},{id:'d4',label:'ƒêi·ªÅu ti·∫øt tho√°t h∆°i & trao ƒë·ªïi kh√≠'}],explain:'Apoplast‚Üîgian b√†o; Symplast‚Üît·∫ø b√†o ch·∫•t; Caspari‚Üîn·ªôi b√¨; Kh√≠ kh·ªïng‚Üîtho√°t h∆°i.'}
    ];

    const norm=s=>(s||'').toString().toLowerCase().normalize('NFD').replace(/[ÃÄ-ÕØ]/g,'').trim();
    const quizDiv=document.getElementById('quiz');
    const paletteDiv=document.getElementById('questionPalette');
    const levelFilter=document.getElementById('levelFilter');
    const typeFilter=document.getElementById('typeFilter');

    function filteredQuestions(){return QUESTIONS.filter(q=>(levelFilter.value==='all'||q.level===levelFilter.value)&&(typeFilter.value==='all'||q.type===typeFilter.value))}

    function renderQuiz(){
      quizDiv.innerHTML='';
      const qs=filteredQuestions();
      qs.forEach((item,idx)=>{
        const wrap=document.createElement('div');
        wrap.className=`q-item ${item.type}`;
        const icon=item.type==='truefalse'?'‚úÖ':item.type==='fill'?'‚úçÔ∏è':item.type==='short'?'üìù':'üîó';
        let html=`<div class=\"q-header\"><span class=\"q-icon\">${icon}</span><span class=\"q-title\">[${item.level.toUpperCase()}] ${idx+1}. ${item.q}</span></div>`;
        if(item.type==='truefalse'){
          const opts=[['ƒê√∫ng',true],['Sai',false]].map(([lab,val])=>`<label class='choice'><input type='radio' name='q${idx}' value='${val}'/><span>${lab}</span></label>`).join('');
          html+=`<div class='choices'>${opts}</div>`;
        }else if(item.type==='fill'){
          html+=item.answers.map((_,i)=>`<input class='input' style='margin-top:.5rem' placeholder='√î tr·ªëng ${i+1}' data-blank='${i}'/>`).join('');
        }else if(item.type==='short'){
          html+=`<textarea class='input' rows='2' placeholder='Nh·∫≠p ƒë√°p √°n ng·∫Øn...'></textarea>`;
        }else if(item.type==='dragdrop'){
          html+=`<div class='dd-bank'>${item.tokens.map(t=>`<span class='dd-token' draggable='true' data-id='${t.id}'>${t.label}</span>`).join('')}</div>`;
          html+=item.pairs.map((p,i)=>`<div class='dd-row'><div>${i+1}. ${p.prompt}</div><div class='dd-drop' data-target='${p.targetId}'></div></div>`).join('');
        }
        html+=`<div class='explain' hidden>${item.explain}</div>`;
        wrap.innerHTML=html;
        quizDiv.appendChild(wrap);
        if(item.type==='dragdrop') enableDnD(wrap);
      });
      document.getElementById('scoreBox').textContent=`ƒêi·ªÉm: 0/${qs.length}`;
      renderPalette();
      markPalette();
    }

    function enableDnD(scope){
      const tokens=scope.querySelectorAll('.dd-token');
      const drops=scope.querySelectorAll('.dd-drop');
      tokens.forEach(tok=>{tok.addEventListener('dragstart',e=>{e.dataTransfer.setData('text/plain',tok.dataset.id)})});
      drops.forEach(drop=>{
        drop.addEventListener('dragover',e=>{e.preventDefault();drop.style.background='rgba(148,163,184,.12)'});
        drop.addEventListener('dragleave',()=>{drop.style.background=''});
        drop.addEventListener('drop',e=>{e.preventDefault();drop.style.background='';const id=e.dataTransfer.getData('text/plain');drop.textContent='';const src=scope.querySelector(`.dd-token[data-id=\"${id}\"]`);const chip=document.createElement('span');chip.className='dd-token';chip.textContent=src?src.textContent:id;chip.setAttribute('data-id',id);drop.appendChild(chip)});
      });
    }

    function renderPalette(){
      if(!paletteDiv) return;
      paletteDiv.innerHTML='';
      const qs=filteredQuestions();
      qs.forEach((_,i)=>{const btn=document.createElement('button');btn.type='button';btn.className='q-pal-btn';btn.textContent=i+1;btn.addEventListener('click',()=>{const block=quizDiv.children[i];if(block){block.scrollIntoView({behavior:'smooth',block:'start'})}});paletteDiv.appendChild(btn)});
    }

    function markPalette(){
      if(!paletteDiv) return;
      const qs=filteredQuestions();
      Array.from(paletteDiv.children).forEach((btn,i)=>{
        const block=quizDiv.children[i];
        let done=false;const item=qs[i];
        if(!block||!item) return;
        if(item.type==='truefalse'){
          done=!!block.querySelector('input[type=\"radio\"]:checked');
        }else if(item.type==='fill'){
          done=Array.from(block.querySelectorAll('input[data-blank]')).some(inp=>inp.value.trim()!=='');
        }else if(item.type==='short'){
          done=(block.querySelector('textarea')?.value||'').trim()!=='';
        }else if(item.type==='dragdrop'){
          done=Array.from(block.querySelectorAll('.dd-drop')).some(drop=>drop.querySelector('.dd-token'));
        }
        btn.classList.toggle('done',done);
      });
    }

    document.getElementById('toggleQuiz').addEventListener('click',()=>{const quizSec=document.getElementById('quizSection');quizSec.style.display=(quizSec.style.display==='none')?'block':'none'});

    renderQuiz();
    levelFilter.addEventListener('change',renderQuiz);
    typeFilter.addEventListener('change',renderQuiz);
    quizDiv.addEventListener('input',markPalette);
    quizDiv.addEventListener('change',markPalette);

    document.getElementById('submitQuiz').addEventListener('click',()=>{
      const qs=filteredQuestions();
      let score=0;
      const blocks=Array.from(quizDiv.children);
      blocks.forEach((block,i)=>{
        const item=qs[i];
        if(!item) return;
        const exp=block.querySelector('.explain');
        let ans=block.querySelector('.answer');
        if(!ans){
          ans=document.createElement('div');
          ans.className='answer';
          ans.style.marginTop='.4rem';ans.style.fontSize='.95rem';ans.style.borderTop='1px dashed var(--border)';ans.style.paddingTop='.4rem';
          block.appendChild(ans);
        }
        block.classList.remove('correct','wrong');
        let ok=false;
        let answerHTML='';
        if(item.type==='truefalse'){
          const sel=block.querySelector('input[type="radio"]:checked');
          ok=!!sel&&(sel.value===String(item.answer));
          answerHTML=`ƒê√°p √°n: <strong>${item.answer? 'ƒê√∫ng':'Sai'}</strong>`;
        }else if(item.type==='fill'){
          ok=true;
          const inputs=block.querySelectorAll('input[data-blank]');
          inputs.forEach((inp,j)=>{const val=norm(inp.value);const acc=(item.answers[j]||[]).map(norm);const hit=acc.includes(val);inp.style.borderColor=hit?'var(--success)':'var(--danger)';if(!hit) ok=false});
          const show=item.answers.map((alts,idx)=>`√î ${idx+1}: <em>${alts.join(' / ')}</em>`).join(' ¬∑ ');
          answerHTML=`ƒê√°p √°n: ${show}`;
        }else if(item.type==='short'){
          const textEl=block.querySelector('textarea');
          const val=norm(textEl?textEl.value:'');
          ok=(item.acceptable||[]).map(norm).some(a=>val.includes(a)||a.includes(val));
          const sug=(item.acceptable&&item.acceptable[0])?item.acceptable[0]:'';
          answerHTML=`G·ª£i √Ω ƒë√°p √°n: <em>${sug}</em>`;
        }else if(item.type==='dragdrop'){
          ok=true;
          const labelById=Object.fromEntries((item.tokens||[]).map(t=>[t.id,t.label]));
          item.pairs.forEach(p=>{const drop=block.querySelector(`.dd-drop[data-target='${p.targetId}']`);const id=drop?.querySelector('.dd-token')?.getAttribute('data-id');if(id!==p.targetId) ok=false});
          const map=item.pairs.map((p,idx)=>`${idx+1}. ${p.prompt} ‚Üí <em>${labelById[p.targetId]||p.targetId}</em>`).join(' ¬∑ ');
          answerHTML=`ƒê√°p √°n: ${map}`;
        }
        if(ok) score++;
        block.classList.add(ok?'correct':'wrong');
        if(exp) exp.hidden=false;
        ans.innerHTML=answerHTML;
        ans.hidden=false;
      });
      document.getElementById('scoreBox').textContent=`ƒêi·ªÉm: ${score}/${qs.length}`;
      markPalette();
    });

    document.getElementById('resetQuiz').addEventListener('click',()=>{renderQuiz();});

    (function(){
      try{
        const logs=[];const log=(ok,msg)=>logs.push((ok?'‚úÖ ':'‚ùå ')+msg);
        const qs=filteredQuestions();
        log(quizDiv.children.length===qs.length,'TC1: Render s·ªë c√¢u kh·ªõp b·ªô l·ªçc');
        const tfIndex=qs.findIndex(q=>q.type==='truefalse');
        if(tfIndex>=0){const block=quizDiv.children[tfIndex];const radio=block.querySelector("input[type='radio']");if(radio){radio.checked=true;markPalette()}const done=document.querySelectorAll('#questionPalette .q-pal-btn')[tfIndex]?.classList.contains('done');log(done===true,'TC2: Palette done khi ch·ªçn ƒê/S');if(radio){radio.checked=false;markPalette()}} else {log(true,'TC2: B·ªè qua (kh√¥ng c√≥ ƒê/S)')}
        const fillIndex=qs.findIndex(q=>q.type==='fill');
        if(fillIndex>=0){const item=qs[fillIndex];const block=quizDiv.children[fillIndex];const inp=block.querySelector('input[data-blank]');if(inp){inp.value=item.answers[0][0];markPalette()}const done=document.querySelectorAll('#questionPalette .q-pal-btn')[fillIndex]?.classList.contains('done');log(done===true,'TC3: Palette done khi ƒëi·ªÅn');if(inp){inp.value='';markPalette()}} else {log(true,'TC3: B·ªè qua (kh√¥ng c√≥ ƒêi·ªÅn)')}
        const ddIndex=qs.findIndex(q=>q.type==='dragdrop');
        if(ddIndex>=0){const block=quizDiv.children[ddIndex];const drops=block.querySelectorAll('.dd-drop');log(drops.length>0,'TC4: C√≥ v√πng drop cho k√©o‚Äëth·∫£')} else {log(true,'TC4: B·ªè qua (kh√¥ng c√≥ K√©o‚Äëth·∫£)')}
        void 0
        const allExplain=Array.from(document.querySelectorAll('#quiz .explain')).every(e=>e.hidden===false);
        log(allExplain,'TC5: Gi·∫£i th√≠ch hi·ªán cho t·∫•t c·∫£ c√¢u sau khi n·ªôp');
        const scoreText=document.getElementById('scoreBox').textContent.trim();
        log(/^ƒêi·ªÉm:\s*\d+\/\d+$/.test(scoreText),'TC6: Score ƒë·ªãnh d·∫°ng ƒë√∫ng');
        const paletteCount=document.querySelectorAll('#questionPalette .q-pal-btn').length;
        log(paletteCount===qs.length,'TC7: Palette kh·ªõp s·ªë c√¢u');
        logs.forEach(l=>console.log(l));
        const status=document.createElement('div');
        status.id='selftestStatus';
        status.style.cssText='margin:8px 0;font-size:.85rem;color:var(--muted)';
        status.textContent=`Ch·∫©n ƒëo√°n: ${logs.filter(l=>l.startsWith('‚úÖ')).length}/${logs.length} tests passed`;
        const heading=document.getElementById('quizSectionHeading');
        if(heading&&heading.parentNode){heading.parentNode.insertBefore(status,heading.nextSibling)}
      }catch(e){console.error('Self-tests error:',e)}
    })();
  </script>
</body>
</html>
